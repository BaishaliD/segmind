(this.webpackJsonpsegmind=this.webpackJsonpsegmind||[]).push([[0],{19:function(e,t,a){},22:function(e,t,a){},23:function(e,t){},25:function(e,t){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),o=a.n(s),i=a(6),c=a.n(i),l=(a(19),a(5)),r=a.n(l),d=a(7),u=a(8),h=a(9),b=a(3),f=a(13),p=a(12),g=a(11),j=a(10),v=a.n(j);a(22);function m(e){var t=e.images,a=e.openCanvas,o=e.dataRaw;console.log("DATA PASSED TO GALLERY",o);var i=Object(s.useState)(0),c=Object(g.a)(i,2),l=c[0],r=c[1],d=t;var u=8*l,h=d.slice(u,u+8).map((function(e){return Object(n.jsx)("img",{src:e.coco_url,onClick:function(){return a(e)}})})),b=Math.ceil(d.length/8);return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("h1",{children:"Image gallery"}),Object(n.jsx)("div",{className:"imageGrid",children:h}),Object(n.jsx)(v.a,{previousLabel:"\u2190 Previous",nextLabel:"Next \u2192",pageCount:b,onPageChange:function(e){var t=e.selected;r(t)},containerClassName:"pagination",previousLinkClassName:"pagination__link",nextLinkClassName:"pagination__link",disabledClassName:"pagination__link--disabled",activeClassName:"pagination__link--active"})]})}var O=a(2),C=a.n(O),x=function(e){var t=e.selectedImage,a=e.annotations,o=e.renderCanvas,i=(e.showLabels,e.hideLabels,t.id,t.coco_url,t.width),c=t.height;return Object(s.useEffect)((function(){o(t,a)})),Object(n.jsx)("div",{className:"cart",children:Object(n.jsx)("canvas",{id:"paper-canvas",height:c,width:i,resize:"true"})})},I=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.generateColorList()},e.generateColorList=function(){for(;e.colors.length<100;){do{var t=Math.floor(1e6*Math.random()+1)}while(e.colors.indexOf(t)>=0);e.colors.push("#"+("000000"+t.toString(16)).slice(-6))}},e.handleChange=function(t){console.log("HANDLE CHANGE",t.target.value,Object(b.a)(e)),e.setState({data:JSON.parse(t.target.value)})},e.handleSubmit=function(t){console.log("HANDLE SUBMIT"),t.preventDefault(),1==e.state.fileInput?e.uploadFile():1==e.state.demoDataInput&&e.useDemoData()},e.useDemoData=Object(d.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.jsonbin.io/b/600dc2edd4d77374a3f42c2d");case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,console.log("DEMO DATA",n),e.setState({data:n,displayImages:!0});case 8:case"end":return t.stop()}}),t)}))),e.uploadFile=function(){var t=document.getElementById("fileInput");if(t&&t.files.length>0){var a=new FileReader;a.addEventListener("load",(function(){var t=JSON.parse(a.result);console.log("DATA IN UPLAD FILE FUNCTION",t),e.setState({data:t,displayImages:!0})})),a.readAsText(t.files[0])}},e.openCanvas=function(t){console.log("SELECTED IMAGE",t),e.setState({showCanvas:!0,displayImages:!1,selectedImage:t})},e.renderCanvas=function(t,a){console.log("RENDER CANVAS",a),C.a.setup("paper-canvas");new C.a.Raster({source:t.coco_url,position:C.a.view.center});a.forEach((function(t){var a=t.bbox,n=a[0],s=a[1],o=a[2],i=a[3],c=new C.a.Rectangle(n,s,o,i),l=new C.a.Path.Rectangle(c);l.hasStroke=!0,l.strokeColor=e.colors[t.category_id]}))},e.showLabels=function(e){e.forEach((function(e){var t=e.bbox[0],a=e.bbox[1],n=new C.a.PointText({point:new C.a.Point(t,a),content:"text",justification:"center",fontFamily:"Noto Sans",fillColor:"white"}),s=new C.a.Path.Rectangle(n.bounds);s.fillColor="black",s.strokeColor="black",n.insertAbove(s)}))},e.hideLabels=function(t){e.renderCanvas(e.state.selectedImage,t)},e.state={data:null,displayImages:!1,selectedImage:null,showCanvas:!1,fileInput:!1,demoDataInput:!1},e.colors=[],e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,s=t.displayImages,o=t.selectedImage,i=t.showCanvas,c=t.fileInput,l=t.demoDataInput;return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Object Detection"}),Object(n.jsxs)("div",{children:["Upload a JSON file (in COCO JSON format), or use our ",Object(n.jsx)("a",{href:"https://api.jsonbin.io/b/600dc2edd4d77374a3f42c2d",target:"_blank",children:"demo dataset"}),"."]}),Object(n.jsx)("button",{onClick:function(){e.setState({fileInput:!0})},children:"Upload JSON"}),Object(n.jsx)("button",{onClick:function(){e.setState({demoDataInput:!0})},children:"Use Demo Dataset"}),Object(n.jsxs)("div",{children:[c?Object(n.jsx)("input",{type:"file",id:"fileInput"}):"",l?Object(n.jsx)("div",{children:"Demo file uploaded. Please press Submit."}):""]}),Object(n.jsx)("button",{onClick:this.handleSubmit,children:"Submit"}),s?Object(n.jsx)(m,{dataRaw:a,images:a.images,openCanvas:this.openCanvas}):"",i?Object(n.jsx)(x,{selectedImage:o,annotations:a.annotations,renderCanvas:this.renderCanvas,showLabels:this.showLabels,hideLabels:this.hideLabels}):""]})}}]),a}(o.a.Component),S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,27)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),o(e),i(e)}))};c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root")),S()}},[[26,1,2]]]);
//# sourceMappingURL=main.4fd63c9c.chunk.js.map